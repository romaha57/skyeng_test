# Тестовое задание от Skyeng
## Сервис проверки файлов с выполненными задачами
Краткое описание:
- разработана аутентификация/авторизация
- при загрузке файла отправляем на автоматическую проверку(celery-task) и далее отправляется письмо(celery-task) на email пользователя, который загрузил файл
- если есть ошибки, они отправляются в тексте письма, если нет, то отправляется письмо с успешным прохождение проверки
- затем в отчете на странице 'Загрузить файл' в таблице появляется соответсвующая метка о прохождении проверки

---

## Установка с Docker
- `git clone https://github.com/romaha57/skyeng_test.git`
- `docker-compose up`
-  зайти в админку под суперпользователем и установить плановую задачу в 'Периодические задачи' для функции app_main.tasks.check_file с нужным интервалом
- пользоваться сервисом

Данные для создания superuser прописать в переменные окружения в docker-compose.yml

(DJANGO_SUPERUSER_PASSWORD - пароль для входа в админку
DJANGO_SUPERUSER_EMAIL - email для входа
DJANGO_SUPERUSER_USERNAME - можно такое же значение как в email)

---

## Установка вручную:
- `git clone https://github.com/romaha57/skyeng_test.git`
- активировать виртуальное окружение
- `cd check_file`
- `python manage.py makemigrations`
- `python manage.py migrate`
- `python manage.py createsuperuser` - обязательно указать email
- `python manage.py runserver` - запуск проекта
- в консоли запустить `redis-server`
- в консоли `celery -A check_file worker -l info` - воркер для получения и выполнения задач
- в консоли `celery -A check_file beat -l INFO` - запуск beat для выполнения плановых задач
- зайти в админку под суперпользователем и установить плановую задачу в 'Периодические задачи' для функции app_main.tasks.check_file с нужным интервалом
- пользоваться сервисом


P.s. Отправка писем не работает на gmail(yandex smpt не дает отправлять письма без аутентификации в гугле, как я понял)